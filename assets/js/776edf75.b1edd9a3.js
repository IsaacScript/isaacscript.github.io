"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[50760],{3358:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>a});var s=n(31085),i=n(71184);const r={custom_edit_url:null},o="Custom Trapdoors",d={id:"isaacscript-common/features/CustomTrapdoors",title:"Custom Trapdoors",description:"Hierarchy",source:"@site/docs/isaacscript-common/features/CustomTrapdoors.md",sourceDirName:"isaacscript-common/features",slug:"/isaacscript-common/features/CustomTrapdoors",permalink:"/isaacscript-common/features/CustomTrapdoors",draft:!1,unlisted:!1,editUrl:null,tags:[],version:"current",frontMatter:{custom_edit_url:null},sidebar:"isaacScriptCommon",previous:{title:"Custom Stages",permalink:"/isaacscript-common/features/CustomStages"},next:{title:"Debug Display",permalink:"/isaacscript-common/features/DebugDisplay"}},l={},a=[{value:"Hierarchy",id:"hierarchy",level:2},{value:"Methods",id:"methods",level:2},{value:"registerCustomTrapdoorDestination",id:"registercustomtrapdoordestination",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Returns",id:"returns",level:4},{value:"Defined in",id:"defined-in",level:4},{value:"spawnCustomTrapdoor",id:"spawncustomtrapdoor",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Returns",id:"returns-1",level:4},{value:"Defined in",id:"defined-in-1",level:4}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"custom-trapdoors",children:"Custom Trapdoors"}),"\n",(0,s.jsx)(t.h2,{id:"hierarchy",children:"Hierarchy"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:"Feature"})}),"\n",(0,s.jsxs)(t.p,{children:["\u21b3 ",(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"CustomTrapdoors"})})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(t.h3,{id:"registercustomtrapdoordestination",children:"registerCustomTrapdoorDestination"}),"\n",(0,s.jsxs)(t.p,{children:["\u25b8 ",(0,s.jsx)(t.strong,{children:"registerCustomTrapdoorDestination"}),"(",(0,s.jsx)(t.code,{children:"destinationName"}),", ",(0,s.jsx)(t.code,{children:"destinationFunc"}),"): ",(0,s.jsx)(t.code,{children:"void"})]}),"\n",(0,s.jsxs)(t.p,{children:["Helper function to specify where your custom trapdoor should take the player. Call this once at\nthe beginning of your mod for each kind of custom trapdoor that you want to have. The provided\n",(0,s.jsx)(t.code,{children:"destinationFunc"})," will be executed when the player jumps into the trapdoor and the pixelation\neffect fades to black."]}),"\n",(0,s.jsx)(t.p,{children:"Registration is needed so that custom trapdoors can be serializable when the player saves and\nquits."}),"\n",(0,s.jsxs)(t.p,{children:["In order to use this function, you must upgrade your mod with ",(0,s.jsx)(t.code,{children:"ISCFeature.CUSTOM_TRAPDOORS"}),"."]}),"\n",(0,s.jsx)(t.h4,{id:"parameters",children:"Parameters"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Name"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Type"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"destinationName"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"string"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["The name that identifies the type of custom trapdoor. It should correspond to a local ",(0,s.jsx)(t.code,{children:"CustomTrapdoorType"})," enum in your mod. It can be any unique value and can safely overlap with values chosen by other mods."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"destinationFunc"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["(",(0,s.jsx)(t.code,{children:"destinationName"}),": ",(0,s.jsx)(t.code,{children:"undefined"})," | ",(0,s.jsx)(t.code,{children:"string"}),", ",(0,s.jsx)(t.code,{children:"destinationStage"}),": ",(0,s.jsx)(t.code,{children:"LevelStage"}),", ",(0,s.jsx)(t.code,{children:"destinationStageType"}),": ",(0,s.jsx)(t.code,{children:"StageType"}),") => ",(0,s.jsx)(t.code,{children:"void"})]}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["A function that takes the player to the destination that you want. Inside this function, use the ",(0,s.jsx)(t.code,{children:"setStage"})," or ",(0,s.jsx)(t.code,{children:"setCustomStage"})," helper functions, or do something completely custom."]})]})]})]}),"\n",(0,s.jsx)(t.h4,{id:"returns",children:"Returns"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:"void"})}),"\n",(0,s.jsx)(t.h4,{id:"defined-in",children:"Defined in"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"https://github.com/IsaacScript/isaacscript/blob/54ef116/packages/isaacscript-common/src/classes/features/other/CustomTrapdoors.ts#L682",children:"packages/isaacscript-common/src/classes/features/other/CustomTrapdoors.ts:682"})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h3,{id:"spawncustomtrapdoor",children:"spawnCustomTrapdoor"}),"\n",(0,s.jsxs)(t.p,{children:["\u25b8 ",(0,s.jsx)(t.strong,{children:"spawnCustomTrapdoor"}),"(",(0,s.jsx)(t.code,{children:"gridIndexOrPosition"}),", ",(0,s.jsx)(t.code,{children:"destinationName?"}),", ",(0,s.jsx)(t.code,{children:"destinationStage?"}),", ",(0,s.jsx)(t.code,{children:"destinationStageType?"}),", ",(0,s.jsx)(t.code,{children:"anm2Path?"}),", ",(0,s.jsx)(t.code,{children:"spawnOpen?"}),"): ",(0,s.jsx)(t.code,{children:"GridEntity"})]}),"\n",(0,s.jsx)(t.p,{children:"Helper function to spawn a trapdoor grid entity that will take a player to a vanilla stage or\ncustom location."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["If you want to create a custom trapdoor that goes to a vanilla stage, pass ",(0,s.jsx)(t.code,{children:"undefined"})," for\nthe ",(0,s.jsx)(t.code,{children:"destinationName"})," parameter."]}),"\n",(0,s.jsxs)(t.li,{children:["If you want to create a custom trapdoor that takes the player to a custom location, you must\nhave registered the corresponding ",(0,s.jsx)(t.code,{children:"destinationName"})," at the beginning of your mod with the\n",(0,s.jsx)(t.code,{children:"registerCustomTrapdoorDestination"})," function. (This is necessary so that custom trapdoors can\nbe serializable when the player saves and quits.)"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Under the hood, the custom trapdoor is represented by a decoration grid entity and is manually\nrespawned every time the player re-enters the room."}),"\n",(0,s.jsxs)(t.p,{children:["In order to use this function, you must upgrade your mod with ",(0,s.jsx)(t.code,{children:"ISCFeature.CUSTOM_TRAPDOORS"}),"."]}),"\n",(0,s.jsx)(t.h4,{id:"parameters-1",children:"Parameters"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Name"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Type"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Default value"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"gridIndexOrPosition"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,s.jsx)(t.code,{children:"int"})," | ",(0,s.jsx)(t.code,{children:"Vector"})]}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"undefined"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The location in the room to spawn the trapdoor."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"destinationName?"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"string"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"undefined"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Optional. A string representing the name of the of destination that the custom trapdoor will take the player to. Default is undefined, which will take the player to a vanilla stage."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"destinationStage?"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"LevelStage"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"undefined"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Optional. The first argument that will be passed to the ",(0,s.jsx)(t.code,{children:"destinationFunc"}),' corresponding to this custom trapdoor. This is essentially metadata for the custom trapdoor. Leave this undefined if your corresponding custom trapdoor function does not care what the destination stage should be. Default is the "normal" next vanilla stage.']})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"destinationStageType?"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"StageType"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"undefined"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Optional. The second argument that will be passed to the ",(0,s.jsx)(t.code,{children:"destinationFunc"}),' corresponding to this custom trapdoor. This is essentially metadata for the custom trapdoor. Leave this undefined if your corresponding custom trapdoor function does not care what the destination stage type should be. Default is the "normal" next vanilla stage type.']})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"anm2Path"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"string"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:'"gfx/grid/door_11_trapdoor.anm2"'})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:'Optional. The path to the anm2 file to use. By default, the vanilla trapdoor anm2 of "gfx/grid/door_11_trapdoor.anm2" will be used. The specified anm2 file must have animations called "Opened", "Closed", and "Open Animation".'})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"spawnOpen?"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"boolean"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"undefined"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Optional. Whether to spawn the trapdoor in an open state. By default, behavior will be used that emulates a vanilla trapdoor."})]})]})]}),"\n",(0,s.jsx)(t.h4,{id:"returns-1",children:"Returns"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:"GridEntity"})}),"\n",(0,s.jsx)(t.h4,{id:"defined-in-1",children:"Defined in"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"https://github.com/IsaacScript/isaacscript/blob/54ef116/packages/isaacscript-common/src/classes/features/other/CustomTrapdoors.ts#L738",children:"packages/isaacscript-common/src/classes/features/other/CustomTrapdoors.ts:738"})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},71184:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>d});var s=n(14041);const i={},r=s.createContext(i);function o(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);