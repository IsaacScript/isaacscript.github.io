"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[24489],{87688:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var n=o(31085),a=o(71184);const r={title:"Converting Lua Code"},i=void 0,s={id:"main/converting-lua-code",title:"Converting Lua Code",description:"Sometimes, you might want to convert an old mod written in Lua to TypeScript. There are two ways to do this.",source:"@site/docs/main/converting-lua-code.md",sourceDirName:"main",slug:"/main/converting-lua-code",permalink:"/main/converting-lua-code",draft:!1,unlisted:!1,editUrl:"https://github.com/IsaacScript/isaacscript/edit/main/packages/docs/docs/main/converting-lua-code.md",tags:[],version:"current",frontMatter:{title:"Converting Lua Code"},sidebar:"docs",previous:{title:"Using Feature Classes - The Modern Way to Write Isaac Mods",permalink:"/main/mod-feature"},next:{title:"Updating IsaacScript",permalink:"/main/updating-isaacscript"}},c={},l=[{value:"LuaToTypeScript",id:"luatotypescript",level:2},{value:"Manually With a Macro",id:"manually-with-a-macro",level:2},{value:"1) Install the ssmacro Extension",id:"1-install-the-ssmacro-extension",level:3},{value:"2) Download the Macro",id:"2-download-the-macro",level:3},{value:"3) Make a Keyboard Shortcut",id:"3-make-a-keyboard-shortcut",level:3},{value:"4) Open a Lua File and Convert It",id:"4-open-a-lua-file-and-convert-it",level:3},{value:"5) Copy It Over One Function at a Time",id:"5-copy-it-over-one-function-at-a-time",level:3}];function d(e){const t={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"Sometimes, you might want to convert an old mod written in Lua to TypeScript. There are two ways to do this."}),"\n",(0,n.jsx)(t.br,{}),"\n",(0,n.jsx)(t.h2,{id:"luatotypescript",children:"LuaToTypeScript"}),"\n",(0,n.jsxs)(t.p,{children:["Hazzard993 wrote ",(0,n.jsx)(t.a,{href:"https://github.com/hazzard993/LuaToTypeScript",children:"a tool to automatically convert Lua to TypeScript"}),". This works great and is probably what you will want to use. Note that it does not convert comments, so you might want to manually transfer those over afterward. "]}),"\n",(0,n.jsx)(t.br,{}),"\n",(0,n.jsx)(t.h2,{id:"manually-with-a-macro",children:"Manually With a Macro"}),"\n",(0,n.jsx)(t.p,{children:"If you want more fine-grained control over converting your code, then you can also do it manually with a macro. Here's a quick tutorial to convert code using a simple macro."}),"\n",(0,n.jsx)(t.br,{}),"\n",(0,n.jsx)(t.h3,{id:"1-install-the-ssmacro-extension",children:"1) Install the ssmacro Extension"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://marketplace.visualstudio.com/items?itemName=joekon.ssmacro",children:"ssmacro"})," is a popular VSCode extension that allows you to make macros."]}),"\n",(0,n.jsx)(t.br,{}),"\n",(0,n.jsx)(t.h3,{id:"2-download-the-macro",children:"2) Download the Macro"}),"\n",(0,n.jsxs)(t.p,{children:["I've written ",(0,n.jsx)(t.a,{href:"https://raw.githubusercontent.com/IsaacScript/isaacscript/main/misc/convert-lua-to-typescript.json",children:"a short macro"})," that does some basic conversions. For example, it converts ",(0,n.jsx)(t.code,{children:"local"})," to ",(0,n.jsx)(t.code,{children:"let"}),", ",(0,n.jsx)(t.code,{children:"and"})," to ",(0,n.jsx)(t.code,{children:"&&"}),", and so forth. (Feel free to customize it to your liking.)"]}),"\n",(0,n.jsxs)(t.p,{children:["Download it to the following directory: ",(0,n.jsx)(t.code,{children:"C:\\Users\\%USERNAME%\\.vscode\\extensions\\joekon.ssmacro-0.6.0\\macros"})," "]}),"\n",(0,n.jsx)(t.br,{}),"\n",(0,n.jsx)(t.h3,{id:"3-make-a-keyboard-shortcut",children:"3) Make a Keyboard Shortcut"}),"\n",(0,n.jsx)(t.p,{children:"You can set up a keyboard shortcut to automatically execute the macro."}),"\n",(0,n.jsx)(t.p,{children:'In VSCode, type Ctrl + Shift + P, then type in "Preferences: Open Keyboard Shortcuts (JSON)". Then, add a keybinding like so:'}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-jsonc",children:'// Place your key bindings in this file to override the defaults\n[\n  {\n    "key": "ctrl+shift+alt+v",\n    "command": "ssmacro.macro",\n    "args": { "file": "convert-lua-to-typescript.json" },\n  },\n]\n'})}),"\n",(0,n.jsx)(t.br,{}),"\n",(0,n.jsx)(t.h3,{id:"4-open-a-lua-file-and-convert-it",children:"4) Open a Lua File and Convert It"}),"\n",(0,n.jsx)(t.p,{children:"Open a big Lua file and use the hotkey to perform the replacements on everything in the file."}),"\n",(0,n.jsx)(t.br,{}),"\n",(0,n.jsx)(t.h3,{id:"5-copy-it-over-one-function-at-a-time",children:"5) Copy It Over One Function at a Time"}),"\n",(0,n.jsx)(t.p,{children:"If you copy an entire file into your TypeScript project at once, then it will be kind of a mess and the auto-formatter won't work. Instead, just copy one function at a time into the corresponding TypeScript file, fix the errors, if any, and let the auto-formatter do the work of arranging everything properly. (You run the auto-formatter by simply saving the file, since it is configured by default to run on save.)"}),"\n",(0,n.jsx)(t.p,{children:"A lot of the time, you won't be able to fix some of the errors, like functions that are being called that are not declared yet. Just ignore those until you get everything copied over."})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},71184:(e,t,o)=>{o.d(t,{R:()=>i,x:()=>s});var n=o(14041);const a={},r=n.createContext(a);function i(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);